"""
–¢–µ—Å—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ —Å—Ç—Ä–æ–∫.

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ—Å—Ç—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π validate_is_str –∏ validate_is_not_empty_str,
–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç, —á—Ç–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π –∏ –Ω–µ–ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.
"""

import pytest

from validators.str import validate_is_str, validate_is_not_empty_str
from validators.exceptions import ValueIsNotStrException, ValueIsEmptyStrException


class TestStrValidators:
    """–¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ —Å—Ç—Ä–æ–∫."""
    
    def test_validate_is_str_valid(self):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é."""
        # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Å—Ç—Ä–æ–∫
        # –í–∫–ª—é—á–∞—è –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É, —Å—Ç—Ä–æ–∫–∏ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
        valid_strings = [
            "",               # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
            "hello",          # –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
            "  hello  ",       # –°—Ç—Ä–æ–∫–∏ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
            "hello world",    # –°—Ç—Ä–æ–∫–∏ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ –≤–Ω—É—Ç—Ä–∏
            "123",            # –°—Ç—Ä–æ–∫–∏ —Å —Ü–∏—Ñ—Ä–∞–º–∏
            "!@#$%^&*()",     # –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
            "–ü—Ä–∏–≤–µ—Ç",         # –ö–∏—Ä–∏–ª–ª–∏—Ü–∞
            "Hello123!@#",    # –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏
            " ",              # –û–¥–∏–Ω –ø—Ä–æ–±–µ–ª
            "\t\n",           # –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã (—Ç–∞–±—É–ª—è—Ü–∏—è, –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞)
            "üôÇ",             # –≠–º–æ–¥–∑–∏
            "üåç",             # –≠–º–æ–¥–∑–∏
            "a" * 1000        # –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
        ]
        
        for value in valid_strings:
            assert validate_is_str(value) == value
    
    def test_validate_is_str_invalid_type(self):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ—Å—Ç—Ä–æ–∫–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –≤—ã–∑—ã–≤–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ."""
        # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Å—Ç—Ä–æ–∫–∞–º–∏
        invalid_types = [
            123,              # –¶–µ–ª–æ–µ —á–∏—Å–ª–æ
            123.5,            # –î—Ä–æ–±–Ω–æ–µ —á–∏—Å–ª–æ
            True,             # –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
            False,            # –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
            [],               # –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
            [1, 2, 3],       # –ù–µ–ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
            {},               # –ü—É—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å
            {"a": 1},         # –ù–µ–ø—É—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å
            (),               # –ü—É—Å—Ç–æ–π –∫–æ—Ä—Ç–µ–∂
            (1, 2),          # –ù–µ–ø—É—Å—Ç–æ–π –∫–æ—Ä—Ç–µ–∂
            None,             # None
            object(),         # –û–±—ä–µ–∫—Ç
            lambda x: x,     # –§—É–Ω–∫—Ü–∏—è
            int,              # –¢–∏–ø
            str               # –¢–∏–ø
        ]
        
        for value in invalid_types:
            with pytest.raises(ValueIsNotStrException):
                validate_is_str(value)
    
    def test_validate_is_str_return_value(self):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ."""
        # –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ –Ω–µ –∫–æ–ø–∏—é
        test_string = "test"
        result = validate_is_str(test_string)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Ç–∏–ø
        assert result == test_string
        assert isinstance(result, str)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - —ç—Ç–æ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç
        assert result is test_string
    
    def test_validate_is_not_empty_str_valid(self):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –Ω–µ–ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é."""
        # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –Ω–µ–ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø—Ä–æ–±–µ–ª—ã –ø–æ –∫—Ä–∞—è–º —É–¥–∞–ª—è—é—Ç—Å—è
        valid_not_empty_strings = [
            ("hello", "hello"),                    # –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
            ("  hello", "hello"),                 # –ü—Ä–æ–±–µ–ª—ã —Å–ª–µ–≤–∞
            ("hello  ", "hello"),                 # –ü—Ä–æ–±–µ–ª—ã —Å–ø—Ä–∞–≤–∞
            ("  hello  ", "hello"),               # –ü—Ä–æ–±–µ–ª—ã —Å –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω
            ("hello world", "hello world"),        # –ü—Ä–æ–±–µ–ª—ã –≤–Ω—É—Ç—Ä–∏
            ("123", "123"),                        # –¶–∏—Ñ—Ä—ã
            ("!@#$%^&*()", "!@#$%^&*()"),         # –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
            ("–ü—Ä–∏–≤–µ—Ç", "–ü—Ä–∏–≤–µ—Ç"),                 # –ö–∏—Ä–∏–ª–ª–∏—Ü–∞
            ("\t—Ç–∞–±\n", "—Ç–∞–±"),                   # –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã
            (" a ", "a"),                         # –û–¥–∏–Ω —Å–∏–º–≤–æ–ª —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
            ("üôÇ", "üôÇ"),                           # –≠–º–æ–¥–∑–∏
            ("  üôÇ  ", "üôÇ"),                     # –≠–º–æ–¥–∑–∏ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
            ("a" * 1000, "a" * 1000)              # –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
        ]
        
        for input_value, expected_output in valid_not_empty_strings:
            assert validate_is_not_empty_str(input_value) == expected_output
    
    def test_validate_is_not_empty_str_invalid_type(self):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ—Å—Ç—Ä–æ–∫–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –≤—ã–∑—ã–≤–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ."""
        # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Å—Ç—Ä–æ–∫–∞–º–∏
        # –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –≤—ã–∑–≤–∞—Ç—å ValueIsNotStrException
        invalid_types = [
            123,              # –¶–µ–ª–æ–µ —á–∏—Å–ª–æ
            123.5,            # –î—Ä–æ–±–Ω–æ–µ —á–∏—Å–ª–æ
            True,             # –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
            False,            # –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
            [],               # –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
            [1, 2, 3],       # –ù–µ–ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
            {},               # –ü—É—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å
            {"a": 1},         # –ù–µ–ø—É—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å
            (),               # –ü—É—Å—Ç–æ–π –∫–æ—Ä—Ç–µ–∂
            (1, 2),          # –ù–µ–ø—É—Å—Ç–æ–π –∫–æ—Ä—Ç–µ–∂
            None,             # None
            object(),         # –û–±—ä–µ–∫—Ç
            lambda x: x,     # –§—É–Ω–∫—Ü–∏—è
            int,              # –¢–∏–ø
            str               # –¢–∏–ø
        ]
        
        for value in invalid_types:
            with pytest.raises(ValueIsNotStrException):
                validate_is_not_empty_str(value)
    
    def test_validate_is_not_empty_str_empty_strings(self):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ —Å—Ç—Ä–æ–∫–∏ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ –≤—ã–∑—ã–≤–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ."""
        # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ –∏ —Å—Ç—Ä–æ–∫ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
        # –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –≤—ã–∑–≤–∞—Ç—å ValueIsEmptyStrException
        empty_strings = [
            "",               # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
            "   ",             # –¢–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª—ã
            "\t\n\r",         # –¢–æ–ª—å–∫–æ —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã
            " \t \n \r ",     # –ü—Ä–æ–±–µ–ª—ã –∏ —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã
            "  ",              # –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª–æ–≤
            "\t\t",           # –ù–µ—Å–∫–æ–ª—å–∫–æ —Ç–∞–±—É–ª—è—Ü–∏–π
            "\n\n"            # –ù–µ—Å–∫–æ–ª—å–∫–æ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏
        ]
        
        for value in empty_strings:
            with pytest.raises(ValueIsEmptyStrException):
                validate_is_not_empty_str(value)
    
    def test_validate_is_not_empty_str_return_value(self):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ."""
        # –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –ø–æ –∫—Ä–∞—è–º
        test_string = "  test  "
        result = validate_is_not_empty_str(test_string)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
        assert result == "test"
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - —ç—Ç–æ –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ (–ø–æ—Å–ª–µ strip)
        # –î–ª—è —Å—Ç—Ä–æ–∫ –≤ Python strip –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç
        assert result is not test_string
    
    def test_validate_is_not_empty_str_edge_cases(self):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–µ–ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫."""
        # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
        edge_cases = [
            (" a", "a"),                           # –û–¥–∏–Ω –ø—Ä–æ–±–µ–ª —Å–ª–µ–≤–∞
            ("a ", "a"),                           # –û–¥–∏–Ω –ø—Ä–æ–±–µ–ª —Å–ø—Ä–∞–≤–∞
            (" a ", "a"),                         # –û–¥–∏–Ω –ø—Ä–æ–±–µ–ª —Å –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã
            ("\ta\t", "a"),                       # –¢–∞–±—É–ª—è—Ü–∏–∏
            ("\na\n", "a"),                       # –ù–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏
            ("\ra\r", "a"),                       # –í–æ–∑–≤—Ä–∞—Ç –∫–∞—Ä–µ—Ç–∫–∏
            ("\fa\f", "a"),                       # –ü–µ—Ä–µ–≤–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            ("üôÇ ", "üôÇ"),                         # –≠–º–æ–¥–∑–∏ —Å –ø—Ä–æ–±–µ–ª–æ–º
            (" üåç", "üåç")                          # –ü—Ä–æ–±–µ–ª —Å —ç–º–æ–¥–∑–∏
        ]
        
        for input_value, expected_output in edge_cases:
            assert validate_is_not_empty_str(input_value) == expected_output